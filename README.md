[2024_lab] <br>
<h2>LLM 기반 개인 맞춤형 러닝 경로 추천 앱</h2>
<hr>

:four_leaf_clover: <strong>프로젝트 소개</strong> <br>
본 프로젝트는 LLM(대규모 언어 모델)과 다양한 API를 활용하여 개인의 러닝 경험을 
혁신적으로 개선하고자 하였다. 사용자의 환경, 경사도, 시설 등 세부적인 요구사항을 반영한 
경로 추천과 실시간 피드백을 제공함으로써, 사용자의 운동 효율성을 높이고 장기적인 운동 
습관 형성을 돕는 것을 목표로 한다.
<hr>

:four_leaf_clover: <strong>활용 데이터 및 API</strong> <br>
- <em>OpenStreetMap(OSM)</em>:  OSM 데이터를 활용하여 사용자가 선호하는 조건에 적합한 경로를 생성<br>
- <em>Google Maps API</em>: 사용자가 입력한 출발지와 도착지는 Google Maps API의 geocode를 호출하여 location(경도와 위도)을 불러옴<br>
- <em>Open AI API</em>: 사용자의 입력을 바탕으로 OSM 데이터의 태그 추출을 위해 AI를 호출하여 데이터 추출<br>
<hr>

:four_leaf_clover: <strong>구현 과정 및 결과</strong> <br><br>
데모 영상: https://youtube.com/shorts/8ar_WebzLu8
<br><br>
<사용자 프레임워크>
![1738221258098-7fb995f2-d1f3-4109-bb0f-31fb55b71cbc_5](https://github.com/user-attachments/assets/dccbc213-5813-40a7-bfe8-2c25668f87dd)

<br>
<주요 기능 소개>
  
![1738221258098-7fb995f2-d1f3-4109-bb0f-31fb55b71cbc_6](https://github.com/user-attachments/assets/48be81b2-cea4-40cd-bb6d-2c9d76a41e42)

<br>

<hr>
:four_leaf_clover: <strong>세부 사항</strong> <br>
                                                
1. <strong>문제 정의</strong> <br>
러닝의 트렌드와 배경
코로나19 이후 러닝 인구가 급증하며, 러닝은 현대인의 주요 운동으로 자리 잡았다. 특히 
한국에서는 소셜 기반의 러닝 크루 활동이 활발하게 이루어지고 있지만, 이러한 활동이 
초보자나 독립적으로 러닝을 즐기는 개인 러너들에게는 적합하지 않은 경우가 많다. <br><br>
기존 시스템은 경로 추천과 실시간 피드백에서 개인화가 부족하다는 한계점을 지닌다. 
사용자의 선호도를 반영한 환경 및 시설 데이터를 러닝 경로에 통합하는 기술적 지원이 
미흡하며, 이로 인해 사용자 맞춤형 경험 제공에 어려움이 있다. 또한, 사용자와의 
상호작용이 제한적이고 동기 부여 기능이 약해 운동의 지속성을 유지하는 데 한계가 있다. <br><br>

2. <strong>제안 내용</strong> <br>
러닝메이트 서비스 개념 <br>
본 프로젝트는 LLM(대규모 언어 모델)과 다양한 API를 활용하여 개인의 러닝 경험을 
혁신적으로 개선하고자 한다. 사용자의 환경, 경사도, 시설 등 세부적인 요구사항을 반영한 
경로 추천과 실시간 피드백을 제공함으로써, 사용자의 운동 효율성을 높이고 장기적인 운동 
습관 형성을 돕는 것을 목표로 한다. <br><br>
a. LLM 및 API를 활용한 개인화 경로 추천 <br>
LLM과 OpenStreetMap(OSM), Google Maps API 등을 연계하여 사용자의 선호도와 
요구사항을 기반으로 최적의 경로를 추천한다. 경로 추천 과정에서는 사용자의 선호와 
비선호 요소를 고려하여 데이터를 분석하고 반영합니다. 먼저, Google Maps API를 통해 
사용자가 선호하거나 비선호하는 경사도를 기반으로 경로를 설정한다. 또한, 사용자가 
선호하는 환경(예: 물가, 공원)과 비선호 환경(예: 산업 지역, 혼잡한 도로)을 분석하고, OSM 
태그 데이터를 활용해 이를 반영한다. 마지막으로, 사용자가 필요로 하는 시설(예: 화장실, 
편의점)과 비선호 시설(예: 주차장, 공사 지역)을 고려해 경로를 최적화한다. 이를 통해 
사용자에게 맞춤화된 러닝 경로를 제공하고자 한다. <br><br>
b. 캐릭터화된 인터페이스 <br>
러닝메이트는 단순히 경로를 추천하는 앱을 넘어, 사용자가 친근함과 동기를 느낄 수 있는 
대화형 캐릭터를 통해 러닝 동반자의 역할을 수행한다. 캐릭터는 러닝 중 사용자를 
격려하거나 긍정적인 메시지를 제공하며, 목표 달성을 위해 지속적으로 응원한다. 예를 
들어, "조금만 더 힘내세요! 목표에 거의 도달했습니다!"와 같은 메시지를 통해 러너의 러닝 
지속성을 높이고, 러닝 경험을 더욱 즐겁게 만든다. <br><br>
c. 통합된 러닝 경험 <br>
해당 서비스를 통해 경로 추천, 실시간 피드백, 대화형 인터페이스를 통합하여 사용자에게 
개인화된 러닝 경험을 제공할 수 있다. 기존 러닝 앱에서 부족했던 개인화된 러닝 솔루션을 
통해 초보자부터 숙련자까지 폭넓게 만족할 수 있는 서비스를 구현한다. 이러한 통합적 
접근은 러닝의 단조로움을 줄이고, 사용자가 러닝을 꾸준히 지속할 수 있는 동기를 
제공하는 데 중점을 둔다. <br>
이를 통해 러닝메이트는 단순한 경로 추천을 넘어, 사용자와의 상호작용을 통해 러닝을 
즐거운 습관으로 만들어주는 혁신적인 러닝 도우미 서비스로 작동할 수 있다. <br><br>

3. <strong>구현한 주요 기능</strong> <br>
a. 사용자 요구사항 분석 <br>
첫번째 주요 기능은 사용자 요구사항 분석이다. 우선 환경 선호도, 경사도, 시설 정보를 
분석한다. 사용자가 입력한 환경 선호도(예: 물가, 공원), 경사도(선호/비선호), 시설(예: 
화장실, 편의점 등)를 분석하여 초기 요구사항을 추출한다. 이를 위해 GPT 기반의 
LLM(Large Language Model)을 활용하여 자연어로 표현된 사용자의 요구를 구조화된 
데이터로 변환한다. 사용자가 입력한 출발지와 도착지는 Google Maps API의 geocode를 
호출하여 location(경도와 위도)을 불러온다. 프롬프트 설계 시에는 다음과 같은 점에 중점을 
두었다. <br>
(1) 명확한 구조화:  사용자의 요구를 거리, 환경, 경사도, 시설 등으로 분류하여 JSON 
형식으로 반환하도록 지시한다. <br>
(2) 사용자 친화적 분석: 사용자의 간접적인 표현(예: "깨끗한 공기가 필요해")도 
분석하여 선호 환경(예: 공원, 숲 등)으로 변환한다. <br>
(3) 불필요한 일반화 방지: 사용자가 명시하지 않은 요소를 추론할 때, 불필요한 
일반화를 방지하고 오직 관련 데이터만 포함하도록 지시한다. <br>
(4) 정확한 지역 지정: 모든 입력은 서울 내 위치에 국한되도록 하여 분석의 정밀성을 
높였다. <br>
(5) 요구사항 보완 및 추가 데이터 수집: 사용자가 입력한 정보가 불충분한 경우, LLM은 
자동으로 부족한 정보를 확인하기 위한 추가 질문을 제안한다. 예를 들면 다음과 
같다. <br>
 ■ 경사도 선호도가 누락된 경우: "경사도 선호도는 낮음, 중간, 높음 중 
어느 쪽인가요?" <br>
 ■ 선호 환경이 명시되지 않은 경우: "러닝 중 선호하는 주변 환경은 
무엇인가요? (예: 공원, 물가)" <br>
(6) 프롬프트 설계 노력: 요구사항 추출 프롬프트는 사용자의 다양하고 복잡한 표현을 
정확히 분석할 수 있도록 다음과 같은 점을 세심히 고려하여 설계되었다: <br>
 ■ 세부 항목별 분류: 거리, 환경, 경사도, 시설 선호도를 별도로 
분류하여 누락을 방지한다. <br>
 ■ 문맥 이해: 사용자의 표현에서 간접적으로 드러나는 요구사항을 
정확히 추론한다. <br>
 ■ 디폴트 값 설정: 명확히 언급되지 않은 항목에 대해 합리적인 
기본값을 제공하여 유연성 확보한다. <br><br>
b. 데이터가공 <br>
데이터 가공의 핵심은 사용자 요구사항과 OSM(OpenStreetMap) 데이터 간의 매칭을 통해 
개인화된 러닝 경로 추천의 기초 데이터를 준비하는 것이다. 먼저 사용자가 입력한 환경 및 
시설 선호도를 기반으로, SentenceTransformer 모델을 활용해 OSM의 태그와 요구사항 간 
유사도를 계산한다. 이를 통해 사용자가 선호하는 환경과 시설을 OSM 데이터에서 정확히 
추출할 수 있다. <br>
유사도 계산 과정에서는 각 사용자 입력값을 임베딩한 뒤, OSM 태그 리스트의 임베딩과 
코사인 유사도를 비교하여 가장 유사한 태그를 선택한다. 유사도 값이 0.7 이상일 경우 해당 
태그를 사용자의 요구사항과 매칭된 태그로 간주한다. 매칭된 태그는 이후 KDTree 
알고리즘을 활용하여 OSM 노드와의 거리 기반 가중치 계산에 반영된다. <br>
이 과정은 사용자가 입력한 데이터의 간접적 표현도 정밀히 분석하여 요구사항을 추론할 수 
있도록 설계되었다. 예를 들어 "깨끗한 공기"를 선호한다고 입력한 경우, "공원"이나 "숲" 
태그를 선호 환경으로 매칭한다. 이러한 유사도 계산은 단순한 키워드 매칭을 넘어 사용자 
요구를 구체화하고 경로 생성의 기반을 마련하는 데 중요한 역할을 한다. <br><br>
c. 경로추천 <br>
마지막 주요 기능은 경로 추천이다. 우선 OpenStreetMap(OSM) 데이터를 활용하여 
사용자가 선호하는 조건에 적합한 경로를 생성한다. 다음으로 경사도(고도 차이), 환경(지형 
및 주변 환경), 시설(선호/비선호 시설) 등의 요소를 고려하여 경로에 가중치를 부여한다. 
초기 가중치의 경우 러너 약 70명에게 설문을 받은 결과를 활용하여 설정했다. <br><br>

4. <strong>기대효과 및 의의</strong> <br>
a. 개인 러너를 위한 정보 제공 <br>
개인 러너를 위한 맞춤형 정보를 제공하며, 기존 러닝 앱이 가지는 한계를 보완한다. 
사용자의 세부적인 요구를 반영한 경로 추천을 통해 더욱 개인화된 러닝 경험을 제공하고, 
새로운 경로 탐색을 가능하게 함으로써 운동의 단조로움을 줄인다. 이를 통해 사용자 
만족도를 높이고, 러닝을 지속할 수 있는 동기를 부여한다. <br><br>
b. 운동 지속성 강화 <br>
맞춤형 경로 추천을 통해 사용자는 자신의 운동 목표와 현재 상태에 적합한 계획을 세울 수 
있으며, 이를 지속적으로 실행할 수 있는 동기를 얻을 수 있다. 이를 통해 체계적이고 지속 
가능한 러닝 습관을 형성함으로써 운동 지속성을 강화한다. <br><br>
c. 기술적 의의 <br>
사용자의 요구사항을 가중치로 변환해 최적 경로를 탐색한다는 점에서 기술적 의의를 
가진다. 사용자가 입력한 선호도와 조건(거리, 경사도, 환경, 시설 등)을 세밀하게 분석하고 
이를 그래프의 노드와 엣지에 가중치로 적용함으로써, 개인화된 경로 추천을 가능하게 
한다. <br><br>
d. 확장 가능성 <br>
웨어러블 기기와의 연동을 통해 정교한 데이터 수집과 분석이 가능하다는 점에서 높은 확장 
가능성을 가진다. 심박수, 칼로리 소모량, 이동 속도 등의 실시간 데이터를 활용하여 더욱 
개인화된 피드백과 추천 제공을 기대할 수 있다. 또한, 러닝뿐만 아니라 하이킹, 사이클링, 
워킹 등 다양한 스포츠와 야외 활동으로 응용 범위를 넓혀, 더욱 폭넓은 사용자층에게 
맞춤형 솔루션을 제공할 수 있다. <br><br>
